# Система Динамической Загрузки Модулей

Эта директория содержит модули, которые могут быть динамически обнаружены, собраны и загружены приложением OsEngine.

## Как Это Работает

### 1. **Обнаружение Модулей**
- Система автоматически сканирует директорию `Modules/` для поиска поддиректорий
- Каждая поддиректория проверяется на наличие файлов `.csproj`
- Модули с файлами проектов идентифицируются как собираемые модули

### 2. **Сборка Модулей**
- Модули собираются с помощью `dotnet build` при необходимости
- Результат сборки размещается в `bin/Debug/net9.0-windows/` внутри каждой директории модуля
- Файлы сборок (`.dll`) генерируются при успешной сборке

### 3. **Загрузка Модулей**
- Собранные сборки динамически загружаются с помощью `Assembly.LoadFrom()`
- Система ищет классы с именами, заканчивающимися на "Module", "Plugin", или с определенными атрибутами
- Загруженные модули могут быть созданы и использованы во время выполнения

## Структура Модуля

Каждый модуль должен следовать этой структуре:
```
ModuleName/
├── ModuleName.csproj          # Файл проекта
├── ModuleName.cs              # Основной класс модуля
└── bin/Debug/net9.0-windows/ # Результат сборки (автогенерируется)
    └── ModuleName.dll         # Файл сборки
```

## Создание Нового Модуля

1. **Создайте новую директорию** в папке `Modules/`
2. **Добавьте файл `.csproj`** со следующей структурой:
   ```xml
   <Project Sdk="Microsoft.NET.Sdk">
     <PropertyGroup>
       <OutputType>Library</OutputType>
       <TargetFramework>net9.0-windows</TargetFramework>
       <UseWPF>true</UseWPF>
     </PropertyGroup>
     <ItemGroup>
       <ProjectReference Include="..\..\OsEngine.csproj" />
     </ItemGroup>
   </Project>
   ```

3. **Создайте класс вашего модуля** с именем, заканчивающимся на "Module" или "Plugin"
4. **Соберите модуль** с помощью кнопки "Build All" в основном приложении
5. **Загрузите модуль** с помощью кнопки "Load"

## Примеры Модулей

- **CalculatorModule**: Простые математические операции
- **DataAnalyzerModule**: Функции статистического анализа
- **NetworkUtilsModule**: Сетевые утилиты

## Использование в Основном Приложении

1. **ComboBox Модулей**: Показывает все обнаруженные модули
2. **Кнопка Build All**: Собирает все модули, которые нуждаются в сборке
3. **Кнопка Load**: Загружает выбранный модуль
4. **Вывод в Консоль**: Показывает подробную информацию об обнаружении, сборке и загрузке модулей

## Преимущества

- **Динамическое Обнаружение**: Нет необходимости изменять основное приложение для добавления новых модулей
- **Автоматическая Сборка**: Модули собираются по требованию
- **Загрузка во Время Выполнения**: Модули могут быть загружены без перезапуска приложения
- **Изоляция**: Каждый модуль является отдельной сборкой со своими зависимостями
- **Расширяемость**: Легко добавлять новую функциональность без изменения основного кода

## Устранение Неполадок

- **Ошибки Сборки**: Проверьте вывод в консоли для ошибок сборки
- **Проблемы Загрузки**: Убедитесь, что классы модулей следуют соглашениям об именовании
- **Отсутствующие Зависимости**: Проверьте ссылки на проекты в файлах `.csproj`
- **Ошибки Загрузки Сборок**: Убедитесь, что модули нацелены на правильную версию .NET
